<div class="relative flex flex-col  -m-6" style="width: 80vw">

    <!-- Header -->
    <!--     -->
    <div class="border border-slate-300 border-solid flex flex-col sm:flex-row items-center sm:items-start py-2 px-4">
        <ng-container *ngIf="data.dismissible.show">
            <div class="absolute top-0 right-0 py-2 pr-4">
                <button [disabled]="data.dismissible.disabled" (click)="matDialogRef.close()" mat-icon-button
                    [matDialogClose]="undefined">
                    <mat-icon class="text-secondary" [svgIcon]="'heroicons_outline:x'"></mat-icon>
                </button>
            </div>
        </ng-container>
        <!-- Icon -->
        <ng-container *ngIf="data.icon.show">
            <div class="flex flex-0 items-center justify-center w-10 h-10 sm:mr-4 rounded-full" [ngClass]="{'text-primary-600 bg-primary-100 dark:text-primary-50 dark:bg-primary-600': data.icon.color === 'primary',
                            'text-accent-600 bg-accent-100 dark:text-accent-50 dark:bg-accent-600': data.icon.color === 'accent',
                            'text-warn-600 bg-warn-100 dark:text-warn-50 dark:bg-warn-600': data.icon.color === 'warn',
                            'text-gray-600 bg-gray-100 dark:text-gray-50 dark:bg-gray-600': data.icon.color === 'basic',
                            'text-blue-600 bg-blue-100 dark:text-blue-50 dark:bg-blue-600': data.icon.color === 'info',
                            'text-green-500 bg-green-100 dark:text-green-50 dark:bg-green-500': data.icon.color === 'success',
                            'text-amber-500 bg-amber-100 dark:text-amber-50 dark:bg-amber-500': data.icon.color === 'warning',
                            'text-red-600 bg-red-100 dark:text-red-50 dark:bg-red-600': data.icon.color === 'error'
                            }">
                <mat-icon class="text-current" [svgIcon]="data.icon.name"></mat-icon>
            </div>
        </ng-container>

        <ng-container *ngIf="data.title || data.message">
            <div
                class="flex flex-col items-center justify-center sm:items-start mt-4 pt-2 sm:mt-0 sm:pr-8 space-y-1 text-center sm:text-left">

                <!-- Title -->
                <ng-container *ngIf="data.title">
                    <div class="text-xl leading-6 font-medium" [innerHTML]="data.title"></div>
                </ng-container>

                <!-- Message -->

            </div>
        </ng-container>

    </div>
    <div class="h-2">
        <div *ngIf="isLoading">
            <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
        </div>
    </div>
    <!-- Content -->
    <div fuseScrollbar style="height: 85vh;max-height: 85vh;"
        class="p-16 rounded-2xl shadow bg-card print:w-auto print:p-0 print:rounded-none print:shadow-none print:bg-transparent">

        <div class="h-full flex rounded-b-md rounded-tr-md flex-col  bg-card shadow">

            <div class="flex flex-col sm:flex-row items-center sm:items-start p-6 pb-6 sm:pb-8 w-full">
                <div class="h-100 flex flex-col sm:flex-row items-center sm:items-start p-6 pb-6 sm:pb-8 w-full">
                    <div class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 bg-card dark:bg-transparent">

                        <!-- Header -->
                        <div
                            class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-4   border-b">
                            <!-- Loader -->

                            <!-- Actions -->
                            <div class="w-full flex flex-row mt-6 sm:mt-0 sm:mx-4">
                                <!-- Search -->
                                <div class="w-1/2">
                                    <mat-form-field class="fuse-mat-dense fuse-mat-no-subscript min-w-50">
                                        <mat-icon matPrefix [svgIcon]="'heroicons_outline:search'"></mat-icon>
                                        <input #priceListFilter [autocomplete]="'off'" matInput [autocomplete]="'off'"
                                            [placeholder]="'Search'">
                                    </mat-form-field>
                                    <button mat-icon-button [matMenuTriggerFor]="contextMenu">
                                        <mat-icon color="accent">more_vert</mat-icon>
                                    </button>
                                </div>
                                <div class="w-1/2 grid justify-items-end">
                                    <input type="file" class="hidden" (change)="ReadExcel($event)" #fileUpload>
                                    <div class="file-upload">

                                        {{fileName || "No file uploaded yet."}}

                                        <button mat-mini-fab color="primary" class="upload-btn"
                                            (click)="fileUpload.click()">
                                            <mat-icon>attach_file</mat-icon>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-auto overflow-hidden  ">


                            <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">


                                <ng-container *ngIf="informationType=='list'">
                                    <div class="grid">
                                        <!-- Header -->
                                        <div class="price-list-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                            matSort matSortDisableClear>

                                            <div class=" lg:block" [mat-sort-header]="'brandName'">
                                                Brand
                                            </div>
                                            <div class=" lg:block" [mat-sort-header]="'code'">
                                                Code
                                            </div>
                                            <div class=" lg:block" [mat-sort-header]="'name'">
                                                Name
                                            </div>
                                            <div class=" lg:block" [mat-sort-header]="'oldPrice'">
                                                Old Price
                                            </div>
                                            <div class=" lg:block" [mat-sort-header]="'newPrice'">
                                                New Price
                                            </div>
                                            <div class=" lg:block" [mat-sort-header]="'difference'">
                                                Difference
                                            </div>
                                            <div class=" lg:block" [mat-sort-header]="'differencePercent'">
                                                Percent
                                            </div>

                                        </div>
                                        <!-- Rows -->
                                        <ng-container *ngIf="filteredProductPriceList?.length > 0; else noChanges">
                                            <ng-container *ngFor="let item of filteredProductPriceList">
                                                <div
                                                    class="price-list-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">

                                                    <!-- SKU -->
                                                    <div class="truncate  lg:block">
                                                        {{item.brandName}}
                                                    </div>

                                                    <div class="truncate  lg:block">
                                                        {{item.productCode}}
                                                    </div>
                                                    <div class="truncate  lg:block">
                                                        {{item.fullName}}
                                                    </div>
                                                    <div class="truncate  lg:block">
                                                        {{item.oldPrice | number: "1.0-5"}}
                                                    </div>
                                                    <div class="truncate  lg:block">
                                                        {{item.newPrice | number: "1.0-5"}}
                                                    </div>
                                                    <div [ngClass]="getDifferenceTextColor(item.difference)"
                                                        class="truncate  lg:block">
                                                        {{item.difference | number: "1.0-5"}}
                                                    </div>
                                                    <div [ngClass]="getDifferenceTextColor(item.differencePercent)"
                                                        class="truncate  lg:block">
                                                        {{item.differencePercent}}%
                                                    </div>
                                                </div>
                                            </ng-container>
                                        </ng-container>
                                    </div>



                                </ng-container>

                                <ng-template #noChanges>
                                    <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">
                                        There
                                        are not any updates!</div>
                                </ng-template>
                            </div>
                        </div>

                    </div>


                </div>
            </div>
        </div>


    </div>
    <ng-container *ngIf="data.actions.confirm.show || data.actions.cancel.show">
        <div
            class="flex items-center justify-center sm:justify-end px-6 py-4 space-x-3 bg-gray-50 dark:bg-black dark:bg-opacity-10">
            <div class="print:hidden flex items-center flex-wrap content-center w-full py-2">
                <div class="w-auto h-auto min-h-12 m-auto">
                    <fuse-alert *ngIf="_result.message" [appearance]="'soft'" [dismissible]=" true" [dismissed]="true"
                        [name]="'successMessage'" [type]="'success'">
                        <b>Result: </b> {{_result.message}}.
                    </fuse-alert>
                    <fuse-alert *ngIf="_result.message" [appearance]="'soft'" [dismissible]="true" [dismissed]="true"
                        [name]="'errorMessage'" [type]="'error'">
                        <b>Result: </b> {{_result.message}}.
                    </fuse-alert>
                </div>
            </div>
            <!-- Cancel -->
            <ng-container *ngIf="data.actions.cancel.show">
                <button (click)="closeDialog()" mat-stroked-button [matDialogClose]="'cancelled'"
                    [disabled]="data.actions.cancel.disabled || isLoading">
                    {{data.actions.cancel.label}}
                </button>
            </ng-container>

            <!-- Confirm -->
            <ng-container *ngIf="data.actions.confirm.show">
                <button (click)="confirm()" mat-flat-button [color]="data.actions.confirm.color"
                    [disabled]="data.actions.confirm.disabled || isLoading || !uploadProcess">
                    {{data.actions.confirm.label}}
                </button>
            </ng-container>

        </div>

    </ng-container>
</div>
<mat-menu #contextMenu="matMenu">
    <ng-template matMenuContent>
        <button mat-menu-item (click)="exportCurrentPrice()">
            <mat-icon svgIcon="mat_outline:file_download"></mat-icon>
            GET CURRENT LIST
        </button>
    </ng-template>
</mat-menu>
<!-- Actions -->
